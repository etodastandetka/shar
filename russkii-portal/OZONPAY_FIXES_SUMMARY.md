# üéØ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è OzonPay - –°–í–û–î–ö–ê

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

### 1. **–ë–µ–ª—ã–π —ç–∫—Ä–∞–Ω –≤ –ø—Ä–æ—Ñ–∏–ª–µ - –ò–°–ü–†–ê–í–õ–ï–ù–û**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ç–∏–ø `Order` –¥–ª—è SQLite
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏ –∑–∞–∫–∞–∑–æ–≤
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Å—Ç–∞—Ç—É—Å—ã: `completed`, `failed`, `processing`

### 2. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è OzonPay - –ò–°–ü–†–ê–í–õ–ï–ù–û**  
- ‚úÖ –£–±—Ä–∞–Ω testMode: —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Å—É–º–º–∞ –ø–ª–∞—Ç–µ–∂–∞ (—Ä—É–±–ª–∏ –≤–º–µ—Å—Ç–æ –∫–æ–ø–µ–µ–∫)
- ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–∏—Ç–∞–µ—Ç—Å—è –∏–∑ `.env` —Ñ–∞–π–ª–∞

### 3. **Webhook –¥–ª—è —Å—Ç–∞—Ç—É—Å–æ–≤ - –†–ê–ë–û–¢–ê–ï–¢**
- ‚úÖ Webhook –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å –ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã
- ‚úÖ `Completed` ‚Üí `payment_status: completed` + `order_status: processing`
- ‚úÖ –°—Ç–∞—Ç—É—Å –≤ –ø—Ä–æ—Ñ–∏–ª–µ –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ "–û–ø–ª–∞—á–µ–Ω"

## üîß –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:

### –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:
```env
# Ozon Pay Production Configuration  
OZONPAY_ACCESS_KEY=f3c0b7c9-9d17-4aa7-94b2-7106649534c3
OZONPAY_SECRET_KEY=E6Wpm0o73sr67ZK7z6qvULn77BqG0lvR
OZONPAY_NOTIFICATION_SECRET_KEY=3UrW32FscjhqAmeJhuq14eZ8hPamZlz8
OZONPAY_API_URL=https://payapi.ozon.ru/v1
OZONPAY_SUCCESS_URL=https://helens-jungle.ru/payment/success
OZONPAY_FAIL_URL=https://helens-jungle.ru/payment/fail
OZONPAY_WEBHOOK_URL=https://helens-jungle.ru/api/ozonpay/webhook

NODE_ENV=production
```

## üöÄ –†–µ–∑—É–ª—å—Ç–∞—Ç:

**–¢–ï–ü–ï–†–¨ –°–ò–°–¢–ï–ú–ê –†–ê–ë–û–¢–ê–ï–¢ –í –ü–†–û–î–ê–ö–®–ï–ù–ï!**

1. ‚úÖ –ó–∞–∫–∞–∑—ã —Å–æ–∑–¥–∞—é—Ç—Å—è —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ —Å—É–º–º–∞–º–∏ (–≤ —Ä—É–±–ª—è—Ö)
2. ‚úÖ –û–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ OzonPay —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ testMode
3. ‚úÖ –ü–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã webhook –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å
4. ‚úÖ –í –ø—Ä–æ—Ñ–∏–ª–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è "–û–ø–ª–∞—á–µ–Ω" –≤–º–µ—Å—Ç–æ –±–µ–ª–æ–≥–æ —ç–∫—Ä–∞–Ω–∞
5. ‚úÖ –í—Å–µ —Å—Ç–∞—Ç—É—Å—ã –∑–∞–∫–∞–∑–æ–≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è

**–ù–∏–∫–∞–∫–∏—Ö –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è!** üéâ 